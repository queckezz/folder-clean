# folder-clean

[![npm version][version-image]][version-url]
[![build status][travis-image]][travis-url]
[![dependency status][david-image]][david-url]
[![license][license-image]][license-url]
[![js standard style][standard-image]][standard-url]
[![downloads per month][downloads-image]][downloads-url]

> Deletes all files in a folder which are older than a given date. It returns a detailed report of which files have been **kept**, **deleted** or were **busy**.

## Example

```js
const { clean } = require('folder-clean')
const { join } = require('path')

const config = {
  maxAge: 180,
  recursive: true,
  deleteEmptyFolders: true
}

clean(join(process.cwd(), 'logs'), config)
	.then((report) => {
      console.log('cleaned!')
	})
```

Where `report` returns something like the following:

```js
{
    delete: [{
        itemType: Symbol(FILE),
        actionType: Symbol(DELETE),
        path: '~/absolute/path/recursive/index-old.txt'
    }, {
        itemType: Symbol(FILE),
        actionType: Symbol(DELETE),
        path: '~/absolute/path/recursive/sub-folder/index-old.txt'
    }],
    retain: [{
        itemType: Symbol(FILE),
        actionType: Symbol(RETAIN),
        path: '~/absolute/path/recursive/index.txt'
    }, {
        itemType: Symbol(FILE),
        actionType: Symbol(RETAIN),
        path: '~/absolute/path/recursive/sub-folder/index.txt'
    }, {
        itemType: Symbol(DIR),
        actionType: Symbol(RETAIN),
        path: '~/absolute/path/recursive/sub-folder'
    }]
}
```

## Installation

    > npm install folder-clean

(or)

    > yarn add folder-clean

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### clean

Deletes all files in a folder which are older than a given date. It returns
a detailed report of which files have been **kept**, **deleted**
or were **busy**.

**Parameters**

-   `path` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** Absolute path
-   `config` **\[[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)]** 
    -   `config.recursive` **\[[Boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)]** Whether to clean recursively or not (optional, default `false`)
    -   `config.deleteEmptyFolders` **\[[Boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)]** Whether to delete empty sub folders or not (optional, default `false`)
    -   `config.maxAge` **\[[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)]** Number of days where a file doesn't get deleted (optional, default `90`)
-   `_config`  

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)>** Detailed report about the cleaning process

## License

[MIT][license-url]

[travis-image]: https://img.shields.io/travis/queckezz/folder-clean.svg?style=flat-square

[travis-url]: https://travis-ci.org/queckezz/folder-clean

[version-image]: https://img.shields.io/npm/v/folder-clean.svg?style=flat-square

[version-url]: https://npmjs.org/package/folder-clean

[downloads-image]: https://img.shields.io/npm/dm/folder-clean.svg?style=flat-square

[downloads-url]: https://npmjs.org/package/folder-clean

[david-image]: http://img.shields.io/david/queckezz/folder-clean.svg?style=flat-square

[david-url]: https://david-dm.org/queckezz/folder-clean

[standard-image]: https://img.shields.io/badge/code-standard-brightgreen.svg?style=flat-square

[standard-url]: https://github.com/feross/standard

[license-image]: http://img.shields.io/npm/l/folder-clean.svg?style=flat-square

[license-url]: ./license
